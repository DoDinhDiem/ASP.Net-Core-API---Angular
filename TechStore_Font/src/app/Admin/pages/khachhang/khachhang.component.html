<div class="grid">
    <div class="col-12">
        <div class="card">
            <p-toast></p-toast>
            <p-toolbar styleClass="mb-4 gap-2">
                <ng-template pTemplate="left"> </ng-template>

                <ng-template pTemplate="right">
                    <button style="background: #1d4e89; border: 1px solid #1d4e89" pButton pRipple
                        label="Xuất file Excel" icon="pi pi-upload" class="p-button-help button-radius"></button>
                </ng-template>
            </p-toolbar>

            <p-table [value]="khachhangs" [paginator]="true" [rows]="10" [globalFilterFields]="[
                    'userName',
                    'email',
                    'firstName',
                    'lastName',
                    'diaChi',
                    'ngaySinh',
                    'gioiTinh',
                    'ngayVaoLam',
                    'trangThai',
                    'createDate',
                    'updateDate'
                ]" [tableStyle]="{ 'min-width': '60rem' }" [(selection)]="selecteds" [rowHover]="true"
                currentPageReportTemplate="Hiển thị từ {first} đến {last} của {totalRecords} mục"
                [showCurrentPageReport]="true" [scrollable]="true">
                <ng-template pTemplate="caption">
                    <div class="flex align-items-center justify-content-between">
                        <h5 class="m-0">{{ title }}</h5>
                        <span class="p-input-icon-left flex">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" [(ngModel)]="keyword" (input)="onKeywordInput()"
                                placeholder="Search..." />

                            <p-overlayPanel #op class="ml-3">
                                <ng-template pTemplate="content">
                                    <h4>Tìm kiếm</h4>
                                    <p class="p-float-label mt-3">
                                        <p-autoComplete [(ngModel)]="email" (input)="onKeywordInput()" inputId="Email">
                                        </p-autoComplete>
                                        <label for="float-label">Email</label>
                                    </p>
                                    <p class="p-float-label mt-4">
                                        <p-autoComplete [(ngModel)]="diaChi" (input)="onKeywordInput()"
                                            inputId="Địa chỉ"></p-autoComplete>
                                        <label for="float-label">Đia chỉ</label>
                                    </p>
                                </ng-template>
                            </p-overlayPanel>
                            <p-button (click)="op.toggle($event)" icon="pi pi-filter"></p-button>
                        </span>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th class="text-center">Avatar</th>
                        <th class="text-center" pSortableColumn="userName">
                            UserName<p-sortIcon field="userName"></p-sortIcon>
                        </th>
                        <th class="text-center" pSortableColumn="firstName">
                            Họ đệm<p-sortIcon field="firstName"></p-sortIcon>
                        </th>
                        <th class="text-center" pSortableColumn="lastName">
                            Tên<p-sortIcon field="lastName"></p-sortIcon>
                        </th>
                        <th class="text-center">Số điện thoại</th>
                        <th class="text-center" pSortableColumn="diaChi">
                            Địa chỉ<p-sortIcon field="diaChi"></p-sortIcon>
                        </th>
                        <th class="text-center" pSortableColumn="email">
                            Email<p-sortIcon field="email"></p-sortIcon>
                        </th>
                        <th class="text-center" pSortableColumn="ngaySinh">
                            Ngày sinh<p-sortIcon field="ngaySinh"></p-sortIcon>
                        </th>
                        <th class="text-center" pSortableColumn="gioiTinh">
                            Giới tính<p-sortIcon field="gioiTinh"></p-sortIcon>
                        </th>
                        <th class="text-center" pSortableColumn="trangThai">
                            Trạng thái<p-sortIcon field="trangThai"></p-sortIcon>
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-khachhang>
                    <tr>
                        <td class="text-center">
                            <ng-container *ngIf="khachhang.avarta == null">
                                <img width="80px" style="border-radius: 5px" src="assets/Uploads/avatar.jpg" alt="" />
                            </ng-container>
                            <ng-container *ngIf="khachhang.avarta">
                                <img width="80px" style="border-radius: 5px" src="assets/Uploads/custummer/{{
                                        khachhang.avartar
                                    }}" alt="" />/>
                            </ng-container>
                        </td>
                        <td class="text-center">{{ khachhang.userName }}</td>
                        <td class="text-center">{{ khachhang.firstName }}</td>
                        <td class="text-center">{{ khachhang.lastName }}</td>
                        <td class="text-center">{{ khachhang.soDienThoai }}</td>
                        <td class="text-center">{{ khachhang.diaChi }}</td>
                        <td class="text-center">{{ khachhang.email }}</td>
                        <td class="text-center">
                            {{ khachhang.ngaySinh | date : "dd/MM/yyyy" }}
                        </td>
                        <td class="text-center">{{ khachhang.gioiTinh }}</td>
                        <td class="text-center">{{ khachhang.trangThai }}</td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="summary">
                    <div class="flex align-items-center justify-content-between">
                        Tổng cộng có
                        {{ khachhangs ? khachhangs.length : 0 }} nhân viên.
                    </div>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>